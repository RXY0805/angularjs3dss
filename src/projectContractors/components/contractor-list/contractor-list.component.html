<div class="example-container mat-elevation-z8">
    <div class="example-header" [style.display]="selection.isEmpty() ? '' : 'none'">
        <mat-input-container>
            <input matInput #filter placeholder="Search for keywords">
        </mat-input-container>
    </div>

    <div *ngIf="isCheckable" class="example-header example-selection-header" [style.display]="selection.isEmpty() ? 'none':''">
        {{selection.selected.length}} {{selection.selected.length == 1 ? 'company' : 'companies'}} selected
    </div>

    <!-- [hidden]="selection.isEmpty()"  -->
    <mat-table [dataSource]="dataSource" matSort>
        <!-- select -->
        <!-- <ng-container matColumnDef="id">
            <mat-header-cell *matHeaderCellDef mat-sort-header> ID </mat-header-cell>
            <mat-cell *matCellDef="let row">
                {{row.id}}
            </mat-cell>
        </ng-container> -->
        <ng-container matColumnDef="select" *ngIf="isCheckable">
            <mat-header-cell *matHeaderCellDef>
                <mat-checkbox *ngIf="isCheckable" (change)="$event ? masterToggle() : ''" [checked]="isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()">All
                </mat-checkbox>
            </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row.company.id) : '';onToggleSelectedCompanies(row.company.id, row.company.name)"
                    [checked]="selection.isSelected(row.company.id)">&nbsp;
                </mat-checkbox>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="company.name">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Company Name </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <a *ngIf="!isCheckable" [href]="baseUrl+'UserHome.aspx?view=project&pid='+row.id">{{row.company.name}}</a>
                <span *ngIf="isCheckable">{{row.company.name}}</span>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="company.email">
            <mat-header-cell *matHeaderCellDef mat-sort-header> User </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.company.email}} </mat-cell>
        </ng-container>

        <!-- <ng-container matColumnDef="project.onSite" *ngIf="!isCheckable">
            <mat-header-cell *matHeaderCellDef> On Site </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <mat-select class="width-60-percent" [(value)]="row.project? row.project.onSite:''" (change)="alert('change onsite')">
                    <mat-option *ngFor="let option of onsiteOptions" [value]="option.value">{{option.name}}</mat-option>
                </mat-select>
            </mat-cell>
        </ng-container> -->


        <ng-container matColumnDef="project.auditDate" *ngIf="!isCheckable">
            <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
            <mat-cell *matCellDef="let row"> {{row.project.auditDate | date:'yyyy-MM-dd'}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="project.expiryDate" *ngIf="!isCheckable">
            <mat-header-cell *matHeaderCellDef> Expiry Date </mat-header-cell>
            <mat-cell *matCellDef="let row" [style.color]="getColor(row.project.expiryDate)"> {{row.project.expiryDate | date:'yyyy-MM-dd'}} </mat-cell>
        </ng-container>
        <!-- Color   Column -->
        <!-- <ng-container matColumnDef="company.id">
            <mat-header-cell hidden="!isCheckable" *matHeaderCellDef> ID </mat-header-cell>
            <mat-cell hidden="!isCheckable" *matCellDef="let row"> {{row.company.id}} </mat-cell>
        </ng-container> -->
        <ng-container matColumnDef="id" *ngIf="!isCheckable">
            <mat-header-cell *matHeaderCellDef> </mat-header-cell>
            <mat-cell *matCellDef="let row">
                <a [routerLink]="['/contractors', row.id]">
                    <span>Edit</span>
                </a>
            </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;">
        </mat-row>
    </mat-table>
    <div class="example-no-results" [style.display]="dataSource?.renderedData.length == 0 ? '' : 'none'">
        No contractors found matching filter.
    </div>
    <mat-paginator #paginator [length]="dataLength" [pageIndex]="0" [pageSize]="defaultPageSize" [pageSizeOptions]="[5, 10, 25, 100]">
    </mat-paginator>
</div>